(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e86e6be"],{"0238":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-pagination",{staticStyle:{padding:"15px"},attrs:{"current-page":t.pageinfo.page,"page-sizes":[10,20,30,50],"page-size":t.pageinfo.page_size,total:t.pageinfo.total,layout:"sizes, prev, pager, next, jumper"},on:{"size-change":function(e){return t.$emit("size-change",e)},"current-change":function(e){return t.$emit("page-change",e)}}})},r=[],n={data:function(){return{}},props:["pageinfo"]},o=n,l=a("2877"),s=Object(l["a"])(o,i,r,!1,null,null,null);e["default"]=s.exports},"0712":function(t,e,a){"use strict";(function(t){a.d(e,"a",(function(){return n}));a("456d"),a("ac6a");var i=a("8e44"),r=a("ed08"),n={components:{"delete-modal":Object(r["b"])("delete"),paginate:Object(r["b"])("paginate"),loading:Object(r["b"])("loading"),noresult:Object(r["b"])("noresult")},data:function(){var e=10,a=t(window).height();return a>1024?e=30:a>720&&(e=20),{pageinfo:{page:1,total:60,page_size:e},items:[],form:{},is_loading:!0,reload_:!0,create_dialog:!1,filter:{},deletedialogVisible:!1,is_update:!1,item_data:{}}},created:function(){this.pre()},methods:{pre:function(){this.role&&this.select()},select:function(){var t=this,e={};return e.page_size=this.pageinfo.page_size,e.page=this.pageinfo.page,this.filter&&Object.keys(this.filter).forEach((function(a){e[a]=t.filter[a]})),Object(i["a"])(this,this.role).get(e)},add:function(){this.form={},this.is_update=!1,this.create_dialog=!0},reload:function(){var t=this;this.reload_=!1,this.$nextTick((function(){t.reload_=!0}))},create:function(){return Object(i["a"])(this,this.role).create(this.form).then((function(t,e){t.form={},t.create_dialog=!1,t.select(),t.reload()}))},update:function(){return Object(i["a"])(this,this.role).update(this.form).then((function(t,e){t.form={},t.create_dialog=!1,t.select()}))},edit:function(t,e){this.form=JSON.parse(JSON.stringify(e)),this.is_update=!0,this.create_dialog=!0},remove:function(t,e){this.$store.commit("DELETE",{id:e,index:t}),this.$refs.deletemodal.deletedialogVisible=!0},delete:function(){return Object(i["a"])(this,this.role).delete().then((function(t,e){t.$refs.deletemodal.deletedialogVisible=!1,t.$store.commit("RESET"),t.select()}))},getitem:function(t){return Object(i["a"])(this,this.role).getitem(t).then((function(t,e){t.item_data=e.data.data,t.select()}))},pageChange:function(t){this.pageinfo.page=t,this.select()},sizeChange:function(t){this.pageinfo.page_size=t,this.select()},format_time:function(t){function e(t){return t<10?"0"+t:t}var a=new Date(1e3*t),i=a.getFullYear(),r=a.getMonth()+1,n=a.getDate(),o=a.getHours(),l=a.getMinutes(),s=a.getSeconds();return i+"-"+e(r)+"-"+e(n)+" "+e(o)+":"+e(l)+":"+e(s)}},provide:function(){return{father_delete:this.delete,pageinfo:this.pageinfo,select:this.select}}}}).call(this,a("1157"))},"11e9":function(t,e,a){var i=a("52a7"),r=a("4630"),n=a("6821"),o=a("6a99"),l=a("69a8"),s=a("c69a"),c=Object.getOwnPropertyDescriptor;e.f=a("9e1e")?c:function(t,e){if(t=n(t),e=o(e,!0),s)try{return c(t,e)}catch(a){}if(l(t,e))return r(!i.f.call(t,e),t[e])}},"16c2":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[t._m(0),a("div",{staticClass:"box-body"},[0==t.messages.length?a("div",{staticClass:"panel-body"},[t._v("\n            暂无消息\n        ")]):t._e(),t._l(t.messages,(function(e,i){return a("div",{key:i,staticClass:"panel-body",staticStyle:{"border-bottom":"1px solid #ddd"}},[a("i",{staticClass:"fa fa-check-circle text-green pull-right",attrs:{title:"已读"},on:{click:function(e){return t.clean(i)}}}),t._v("\n            "+t._s(e.text)+"\n        ")])}))],2)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box-header"},[a("h3",{staticClass:"box-title"},[t._v("\n            消息列表\n        ")])])}],n={data:function(){return{messages:this.$store.state.messages}},methods:{clean:function(t){this.messages.splice(t,1)}}},o=n,l=a("2877"),s=Object(l["a"])(o,i,r,!1,null,null,null);e["default"]=s.exports},"1ae4":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"删除提示",visible:t.deletedialogVisible,width:"30%"},on:{"update:visible":function(e){t.deletedialogVisible=e}}},[t._t("content",[a("span",[t._v(t._s(t.message))])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.deletedialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.father_delete}},[t._v("\n            确 定\n        ")])],1)],2)},r=[],n={props:{name:{type:String,default:""},role:{type:String,default:""},message:{type:String,default:"确定删除？"},id:{type:String,default:"delete-modal"}},inject:["father_delete"],data:function(){return{deletedialogVisible:!1}}},o=n,l=a("2877"),s=Object(l["a"])(o,i,r,!1,null,null,null);e["default"]=s.exports},"2f42":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"taskList"}},[a("el-row",{attrs:{gutter:50}},[a("el-col",{attrs:{span:12}},[a("el-table",{staticStyle:{width:"100%",height:"505px"},attrs:{data:t.items},on:{"row-click":t.selectTask}},[a("el-table-column",{attrs:{label:"模板"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.template.name))])]}}])}),a("el-table-column",{attrs:{label:"配置"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.params.name))])]}}])}),a("el-table-column",{attrs:{label:"操作人"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.user.username))])]}}])}),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{effect:"dark",type:t.status_type[e.row.status]}},[t._v("\n                            "+t._s(e.row.status)+"\n                        ")])]}}])})],1),a("paginate",{attrs:{pageinfo:t.pageinfo},on:{"page-change":t.pageChange,"size-change":t.sizeChange}})],1),a("el-col",{staticStyle:{height:"545px","overflow-y":"auto"},attrs:{span:12}},[a("el-timeline",t._l(t.taskLog,(function(e){return a("el-timeline-item",{attrs:{timestamp:"",placement:"top"}},[a("h4",{staticStyle:{display:"inline-block","margin-right":"10px"}},[t._v("\n                        "+t._s(e.name+"-"+e.action_code))]),a("el-tag",{staticStyle:{"margin-right":"10px"},attrs:{type:t.status_type[e.action_log.status]}},[t._v(t._s(e.action_log.status)+"\n                    ")]),"executing"==e.action_log.status?a("i",{staticClass:"el-icon-loading",staticStyle:{color:"#409EFF"}}):t._e(),-1!=t.showLogs.indexOf(e.id)?a("i",{staticClass:"el-icon-arrow-down",on:{click:function(a){return t.showLog(e)}}}):a("i",{staticClass:"el-icon-arrow-right",on:{click:function(a){return t.showLog(e)}}}),-1!=t.showLogs.indexOf(e.id)?a("div",t._l(e.action_log.logger,(function(e){return a("pre",[t._v(t._s(e.time+"-"+e.message))])})),0):t._e()],1)})),1)],1)],1)],1)},r=[],n=(a("c5f6"),a("8e44")),o=(a("ed08"),a("d722"),a("0712")),l={mixins:[o["a"]],props:{templateId:{type:Number,default:3}},data:function(){return{role:"task.task",status_type:{success:"success",failed:"danger",executing:"primary",unexecute:"info",waiting:"info",cancel:"info"},taskLog:[],items:[],activeNames:[],showLogs:[]}},watch:{templateId:function(t){this.filter.template_id=t,this.items=[],this.select()}},methods:{tableRowClassName:function(t){var e=t.row;t.rowIndex;return"unexecute"===e.status?"info-row":"success"===e.status?"success-row":void 0},selectTask:function(t,e,a){var i=this;console.log(t),Object(n["a"])(this,"task.task_log").default.get({task_id:t.id}).then((function(t){i.taskLog=t.data.data}))},showLog:function(t){var e=this.showLogs.indexOf(t.id);-1!=e?this.showLogs.splice(e,1):this.showLogs.push(t.id)}}},s=l,c=a("2877"),u=Object(c["a"])(s,i,r,!1,null,null,null);e["default"]=u.exports},"33c2":function(t,e,a){t.exports=a.p+"img/swagger.5ecafd38.svg"},"3d7b":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("tr",[a("td",{staticClass:"satori-noresult",attrs:{colspan:t.colspan}},[t._v("\n        暂无结果\n    ")])]):t._e()},r=[],n=(a("c5f6"),{props:{show:Boolean,colspan:{type:Number,required:!0}}}),o=n,l=(a("c74d"),a("2877")),s=Object(l["a"])(o,i,r,!1,null,null,null);e["default"]=s.exports},"456d":function(t,e,a){var i=a("4bf8"),r=a("0d58");a("5eda")("keys",(function(){return function(t){return r(i(t))}}))},4671:function(t,e,a){t.exports=a.p+"img/myadmin.a5bf3244.png"},"4a8f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticStyle:{width:"100%"}},[a("el-col",{attrs:{span:10}},[a("div",{staticStyle:{height:"600px"}})]),a("el-col",{staticStyle:{"margin-top":"200px","min-width":"320px"},attrs:{span:4}},[a("h1",{staticStyle:{color:"#66b1ff","text-align":"center","margin-bottom":"50px"}},[t._v("\n            运维平台\n        ")]),a("el-form",{ref:"form",attrs:{model:t.form}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"用户名"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"密码","show-password":""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1),a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:t.login}},[t._v("\n            登录\n        ")])],1),a("el-col",{attrs:{span:9}})],1)},r=[],n=a("0712"),o=a("8e44"),l={mixins:[n["a"]],data:function(){return{}},methods:{login:function(){var t=this;Object(o["a"])(this,"auth.user").default.login(this.form).then((function(e){console.log(e),t.$store.commit("LOGIN_STATUS",!0)}))}}},s=l,c=a("2877"),u=Object(c["a"])(s,i,r,!1,null,null,null);e["default"]=u.exports},"5dbc":function(t,e,a){var i=a("d3f4"),r=a("8b97").set;t.exports=function(t,e,a){var n,o=e.constructor;return o!==a&&"function"==typeof o&&(n=o.prototype)!==a.prototype&&i(n)&&r&&r(t,n),t}},"5eda":function(t,e,a){var i=a("5ca1"),r=a("8378"),n=a("79e5");t.exports=function(t,e){var a=(r.Object||{})[t]||Object[t],o={};o[t]=e(a),i(i.S+i.F*n((function(){a(1)})),"Object",o)}},"5fad":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",[a("h4",[t._v("\n            User 列表\n        ")])]),a("el-main",[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("新建用户")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.items,"row-key":"username"}},[a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),a("el-table-column",{attrs:{label:"群组"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.groups,(function(e){return a("el-tag",{staticStyle:{"margin-right":"5px"}},[t._v("\n                        "+t._s(e.groupname)+"\n                    ")])}))}}])}),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间"}}),a("el-table-column",{staticStyle:{float:"right"},attrs:{label:"操作",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.edit(e.$index,e.row)}}},[t._v("\n                        编辑\n                    ")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.remove(e.$index,e.row.id)}}},[t._v("\n                        删除\n                    ")])]}}])})],1),a("el-dialog",{attrs:{title:t.is_update?"编辑用户":"创建用户",visible:t.create_dialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.create_dialog=e}}},[a("el-form",{attrs:{model:t.form,"label-position":"right","label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t.is_update?t._e():a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{"show-password":""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"群组"}},[a("el-card",{attrs:{shadow:"never"}},[a("el-checkbox-group",{model:{value:t.form.groups,callback:function(e){t.$set(t.form,"groups",e)},expression:"form.groups"}},t._l(t.groups,(function(t){return a("el-checkbox",{key:t.groupname,attrs:{label:t.groupname,border:""}})})),1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.create_dialog=!1}}},[t._v("\n                    取 消\n                ")]),t.is_update?a("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("\n                    确 定\n                ")]):a("el-button",{attrs:{type:"primary"},on:{click:t.create}},[t._v("\n                    确 定\n                ")])],1)],1),a("delete-modal",{ref:"deletemodal",attrs:{name:"项目",role:t.role}})],1),a("el-footer",[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("paginate",{attrs:{pageinfo:t.pageinfo},on:{"page-change":t.pageChange,"size-change":t.sizeChange}})],1)],1)],1)},r=[],n=(a("ac6a"),a("8e44")),o=(a("ed08"),a("d722"),a("0712")),l={mixins:[o["a"]],data:function(){return{role:"auth.user",groups:[]}},created:function(){this.getGroups()},methods:{getGroups:function(){var t=this;Object(n["a"])(this,"auth.group").default.get({page_size:-1}).then((function(e){t.groups=e.data.data}))},create:function(){return Object(n["a"])(this,this.role).create(this.form).then((function(t,e){t.create_dialog=!1,t.select(),t.reload()}))},update:function(){return Object(n["a"])(this,this.role).update(this.form).then((function(t,e){t.create_dialog=!1,t.select()}))},edit:function(t,e){var a=[];e.groups.forEach((function(t){a.push(t.groupname)})),this.form=JSON.parse(JSON.stringify(e)),this.form.groups=a,this.is_update=!0,this.create_dialog=!0},add:function(){this.form={groups:[]},this.is_update=!1,this.create_dialog=!0}}},s=l,c=a("2877"),u=Object(c["a"])(s,i,r,!1,null,null,null);e["default"]=u.exports},"6e78":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{attrs:{gutter:20}},t._l(t.apps,(function(e){return a("el-col",{attrs:{span:4}},[a("el-link",{staticStyle:{display:"block",width:"100%"},attrs:{href:t.getPath(e),target:"_blank"}},[a("el-card",{attrs:{shadow:"never",bodyStyle:"padding:5px"}},[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:12}},[a("el-image",{staticStyle:{height:"40px",display:"inline-block",margin:"5px"},attrs:{src:t.getLogo(e),fit:"contain"}})],1),a("el-col",{attrs:{span:8}},[a("h3",{staticStyle:{"line-height":"50px","align-content":"center",margin:"auto"}},[t._v("\n                                "+t._s(e))])])],1)],1)],1)],1)})),1)],1)},r=[],n=(a("7f7f"),a("0712")),o=(a("8e44"),a("4671")),l=a.n(o),s=a("7e7a"),c=a.n(s),u=a("7ee3"),d=a.n(u),f=a("33c2"),p=a.n(f),m={mixins:[n["a"]],data:function(){return{is_local:-1==window.location.host.indexOf("aixiaochu"),host:-1==window.location.host.indexOf("aixiaochu")?"http://127.0.0.1":window.location.host,path:{myadmin:{local:"8080",online:"myadmin",logo:l.a},portainer:{local:"9000",online:"portainer",logo:c.a},seafile:{local:"8899",online:"seafile",logo:d.a},swagger:{local:"8081",online:"swagger",logo:p.a}},apps:["myadmin","portainer","seafile","swagger"]}},methods:{getPath:function(t){return this.is_local?"http://127.0.0.1:"+this.path[t].local:this.path[t].online+".aixiaochu.nat300.top:7441"},getLogo:function(t){return this.path[t].logo}}},h=m,g=a("2877"),b=Object(g["a"])(h,i,r,!1,null,null,null);e["default"]=b.exports},"73ec":function(t,e,a){},"759b":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",[a("h4",[t._v("\n            Group 列表\n        ")])]),a("el-main",[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("新建群组")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.items,"row-key":"username"}},[a("el-table-column",{attrs:{prop:"groupname",label:"群组名"}}),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间"}}),a("el-table-column",{staticStyle:{float:"right"},attrs:{label:"操作",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.edit(e.$index,e.row)}}},[t._v("\n                        编辑\n                    ")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.remove(e.$index,e.row.id)}}},[t._v("\n                        删除\n                    ")])]}}])})],1),a("el-dialog",{attrs:{title:t.is_update?"编辑群组":"创建群组",visible:t.create_dialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.create_dialog=e}}},[a("el-form",{attrs:{model:t.form,"label-position":"right","label-width":"100px"}},[a("el-form-item",{attrs:{label:"群组名"}},[a("el-input",{model:{value:t.form.groupname,callback:function(e){t.$set(t.form,"groupname",e)},expression:"form.groupname"}})],1),a("el-form-item",{attrs:{label:"资源"}},[a("el-card",{attrs:{shadow:"never",bodyStyle:"padding:5px; max-height: 300px; overflow:auto"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.sourceShow,"show-header":!1}},[a("el-table-column",{attrs:{prop:"uri"}}),a("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-checkbox-group",{staticStyle:{display:"inline-block"},model:{value:e.row.methods,callback:function(a){t.$set(e.row,"methods",a)},expression:"scope.row.methods"}},[a("el-checkbox-button",{key:"GET",attrs:{label:"GET"}},[t._v("GET\n                                        ")]),a("el-checkbox-button",{key:"POST",attrs:{label:"POST"}},[t._v("POST\n                                        ")]),a("el-checkbox-button",{key:"PUT",attrs:{label:"PUT"}},[t._v("PUT\n                                        ")]),a("el-checkbox-button",{key:"DELETE",attrs:{label:"DELETE"}},[t._v("DELETE\n                                        ")])],1)]}}])})],1)],1)],1),a("el-form-item",{attrs:{label:"用户"}},[a("el-card",{attrs:{shadow:"never"}},[a("el-checkbox-group",{model:{value:t.form.users,callback:function(e){t.$set(t.form,"users",e)},expression:"form.users"}},t._l(t.users,(function(t){return a("el-checkbox",{key:t.username,attrs:{label:t.username,border:""}})})),1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.create_dialog=!1}}},[t._v("\n                    取 消\n                ")]),t.is_update?a("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("\n                    确 定\n                ")]):a("el-button",{attrs:{type:"primary"},on:{click:t.create}},[t._v("\n                    确 定\n                ")])],1)],1),a("delete-modal",{ref:"deletemodal",attrs:{name:"项目",role:t.role}})],1),a("el-footer",[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("paginate",{attrs:{pageinfo:t.pageinfo},on:{"page-change":t.pageChange,"size-change":t.sizeChange}})],1)],1)],1)},r=[],n=(a("ac6a"),a("8e44")),o=(a("ed08"),a("d722"),a("0712")),l={mixins:[o["a"]],data:function(){return{role:"auth.group",sources:[],users:[],method:["GET","POST","DELETE","PUT"],sourceShow:[]}},watch:{"form.sources":function(t){var e=[];this.sources.forEach((function(a){var i=!1;if(t)for(var r=0;r<t.length;r++)if(a===t[r].uri){i=!0,e.push(t[r]);break}i||e.push({uri:a,methods:[]})})),this.sourceShow=e},sources:function(t){var e=this,a=[];t.forEach((function(t){var i=!1;if(e.form.sources)for(var r=0;r<e.form.sources.length;r++)if(t===e.form.sources[r].uri){i=!0,a.push(e.form.sources[r]);break}i||a.push({uri:t,methods:[]})})),this.sourceShow=a}},created:function(){this.getSource(),this.getUsers()},methods:{getSource:function(){var t=this;Object(n["a"])(this,"auth.source").default.get().then((function(e){t.sources=e.data.data}))},addSelect:function(){this.form.sources=this.form.source?this.form.source:[],this.form.sources.push(this.sourceSelect),this.sourceSelect={}},getUsers:function(){var t=this;Object(n["a"])(this,"auth.user").default.get({page_size:-1}).then((function(e){t.users=e.data.data}))},create:function(){var t=[];return this.sourceShow.forEach((function(e){e.methods.length&&t.push(e)})),this.form.sources=t,Object(n["a"])(this,this.role).create(this.form).then((function(t,e){t.create_dialog=!1,t.select(),t.reload()}))},update:function(){var t=[];return this.sourceShow.forEach((function(e){e.methods.length&&t.push(e)})),this.form.sources=t,Object(n["a"])(this,this.role).update(this.form).then((function(t,e){t.create_dialog=!1,t.select()}))},edit:function(t,e){var a=[];e.users.forEach((function(t){a.push(t.username)})),this.form=JSON.parse(JSON.stringify(e)),this.form.users=a,this.is_update=!0,this.create_dialog=!0},add:function(){this.form={users:[]},this.is_update=!1,this.create_dialog=!0}}},s=l,c=a("2877"),u=Object(c["a"])(s,i,r,!1,null,null,null);e["default"]=u.exports},"7e7a":function(t,e,a){t.exports=a.p+"img/portainer.0d279ebc.png"},"7eaa":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:t.mode}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},t._l(t.params,(function(e){return a("el-form-item",{attrs:{label:e.show_name}},[e.options?a("el-select",{attrs:{disabled:t.disabled,multiple:"list"==e.type},on:{change:function(e){return t.$emit("change",t.params)}},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"parameter.value"}},t._l(e.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):e.type&&"int"==e.type?a("el-input-number",{attrs:{disabled:t.disabled},on:{change:function(e){return t.$emit("change",t.params)}},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"parameter.value"}}):e.type&&"bool"==e.type?a("el-switch",{attrs:{disabled:t.disabled},on:{change:function(e){return t.$emit("change",t.params)}},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"parameter.value"}}):a("el-input",{attrs:{disabled:t.disabled,placeholder:"请输入内容"},on:{change:function(e){return t.$emit("change",t.params)}},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"parameter.value"}}),e.describe?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.describe,placement:"top-start"}},[a("i",{staticClass:"el-icon-question",staticStyle:{"margin-left":"3px","font-size":"16px"}})]):t._e()],1)})),1)],1)},r=[],n={model:{prop:"params",event:"change"},props:{mode:{type:String,default:"params_show"},params:{type:Array,default:[]},disabled:{type:Boolean,default:!1}},data:function(){return{}}},o=n,l=a("2877"),s=Object(l["a"])(o,i,r,!1,null,null,null);e["default"]=s.exports},"7ee3":function(t,e,a){t.exports=a.p+"img/seafile.800106a9.png"},"7f7f":function(t,e,a){var i=a("86cc").f,r=Function.prototype,n=/^\s*function ([^ (]*)/,o="name";o in r||a("9e1e")&&i(r,o,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})},"8b97":function(t,e,a){var i=a("d3f4"),r=a("cb7c"),n=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(r){e=!0}return function(t,a){return n(t,a),e?t.__proto__=a:i(t,a),t}}({},!1):void 0),check:n}},9093:function(t,e,a){var i=a("ce10"),r=a("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},aa77:function(t,e,a){var i=a("5ca1"),r=a("be13"),n=a("79e5"),o=a("fdef"),l="["+o+"]",s="​",c=RegExp("^"+l+l+"*"),u=RegExp(l+l+"*$"),d=function(t,e,a){var r={},l=n((function(){return!!o[t]()||s[t]()!=s})),c=r[t]=l?e(f):o[t];a&&(r[a]=c),i(i.P+i.F*l,"String",r)},f=d.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(u,"")),t};t.exports=d},ac6a:function(t,e,a){for(var i=a("cadf"),r=a("0d58"),n=a("2aba"),o=a("7726"),l=a("32e9"),s=a("84f2"),c=a("2b4c"),u=c("iterator"),d=c("toStringTag"),f=s.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=r(p),h=0;h<m.length;h++){var g,b=m[h],v=p[b],_=o[b],y=_&&_.prototype;if(y&&(y[u]||l(y,u,f),y[d]||l(y,d,b),s[b]=f,v))for(g in i)y[g]||n(y,g,i[g],!0)}},c428:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.$parent.is_loading?a("div",{staticClass:"overlay"},[a("i",{staticClass:"fa fa-spinner fa-spin"})]):t._e()},r=[],n=a("2877"),o={},l=Object(n["a"])(o,i,r,!1,null,null,null);e["default"]=l.exports},c5f6:function(t,e,a){"use strict";var i=a("7726"),r=a("69a8"),n=a("2d95"),o=a("5dbc"),l=a("6a99"),s=a("79e5"),c=a("9093").f,u=a("11e9").f,d=a("86cc").f,f=a("aa77").trim,p="Number",m=i[p],h=m,g=m.prototype,b=n(a("2aeb")(g))==p,v="trim"in String.prototype,_=function(t){var e=l(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():f(e,3);var a,i,r,n=e.charCodeAt(0);if(43===n||45===n){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===n){switch(e.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+e}for(var o,s=e.slice(2),c=0,u=s.length;c<u;c++)if(o=s.charCodeAt(c),o<48||o>r)return NaN;return parseInt(s,i)}}return+e};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof m&&(b?s((function(){g.valueOf.call(a)})):n(a)!=p)?o(new h(_(e)),a,m):_(e)};for(var y,w=a("9e1e")?c(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)r(h,y=w[x])&&!r(m,y)&&d(m,y,u(h,y));m.prototype=g,g.constructor=m,a("2aba")(i,p,m)}},c74d:function(t,e,a){"use strict";var i=a("73ec"),r=a.n(i);r.a},c8c7:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticStyle:{float:"right",width:"50px",display:"inline-block"},on:{click:function(e){return t.$router.push("/")}}},[a("el-col",[a("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover"}},[a("el-form",{attrs:{"label-position":"right"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("p",[t._v(t._s(t.$store.state.user_info.username))])]),a("el-form-item",{attrs:{label:"邮箱"}},[a("p",[t._v(t._s(t.$store.state.user_info.email))])])],1),a("el-button",{staticStyle:{float:"right"},attrs:{type:"danger"},on:{click:t.logout}},[t._v("退出登录")]),a("el-avatar",{staticStyle:{"margin-top":"5px"},attrs:{slot:"reference",src:t.user_logo},slot:"reference"})],1)],1)],1)],1)},r=[],n=a("0525"),o=a.n(n),l=a("0712"),s=a("8e44"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el-form-item",class:[{"el-form-item--feedback":t.elForm&&t.elForm.statusIcon,"is-error":"error"===t.validateState,"is-validating":"validating"===t.validateState,"is-success":"success"===t.validateState,"is-required":t.isRequired||t.required,"is-no-asterisk":t.elForm&&t.elForm.hideRequiredAsterisk},t.sizeClass?"el-form-item--"+t.sizeClass:""]},[a("label-wrap",{attrs:{"is-auto-width":t.labelStyle&&"auto"===t.labelStyle.width,"update-all":"auto"===t.form.labelWidth}},[t.label||t.$slots.label?a("label",{staticClass:"el-form-item__label",style:t.labelStyle,attrs:{for:t.labelFor}},[t._t("label",[t._v(t._s(t.label+t.form.labelSuffix))])],2):t._e()]),a("div",{staticClass:"el-form-item__content",style:t.contentStyle},[t._t("default"),a("transition",{attrs:{name:"el-zoom-in-top"}},["error"===t.validateState&&t.showMessage&&t.form.showMessage?t._t("error",[a("div",{staticClass:"el-form-item__error",class:{"el-form-item__error--inline":"boolean"===typeof t.inlineMessage?t.inlineMessage:t.elForm&&t.elForm.inlineMessage||!1}},[t._v("\n          "+t._s(t.validateMessage)+"\n        ")])],{error:t.validateMessage}):t._e()],2)],2)],1)},u=[],d=(a("ac6a"),a("a481"),a("a15e"));function f(t,e,a){this.$children.forEach(i=>{var r=i.$options.componentName;r===t?i.$emit.apply(i,[e].concat(a)):f.apply(i,[t,e].concat([a]))})}var p={methods:{dispatch(t,e,a){var i=this.$parent||this.$root,r=i.$options.componentName;while(i&&(!r||r!==t))i=i.$parent,i&&(r=i.$options.componentName);i&&i.$emit.apply(i,[e].concat(a))},broadcast(t,e,a){f.call(this,t,e,a)}}},m=function(t){for(let e=1,a=arguments.length;e<a;e++){let a=arguments[e]||{};for(let e in a)if(a.hasOwnProperty(e)){let i=a[e];void 0!==i&&(t[e]=i)}}return t};a("a026");Object.prototype.hasOwnProperty;function h(){}function g(t,e,a){let i=t;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");let r=e.split("."),n=0;for(let o=r.length;n<o-1;++n){if(!i&&!a)break;let t=r[n];if(!(t in i)){if(a)throw new Error("please transfer a valid prop path to form item!");break}i=i[t]}return{o:i,k:r[n],v:i?i[r[n]]:null}}var b,v,_={props:{isAutoWidth:Boolean,updateAll:Boolean},inject:["elForm","elFormItem"],render:function(){var t=arguments[0],e=this.$slots.default;if(!e)return null;if(this.isAutoWidth){var a=this.elForm.autoLabelWidth,i={};if(a&&"auto"!==a){var r=parseInt(a,10)-this.computedWidth;r&&(i.marginLeft=r+"px")}return t("div",{class:"el-form-item__label-wrap",style:i},[e])}return e[0]},methods:{getLabelWidth:function(){if(this.$el&&this.$el.firstElementChild){var t=window.getComputedStyle(this.$el.firstElementChild).width;return Math.ceil(parseFloat(t))}return 0},updateLabelWidth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"update";this.$slots.default&&this.isAutoWidth&&this.$el.firstElementChild&&("update"===t?this.computedWidth=this.getLabelWidth():"remove"===t&&this.elForm.deregisterLabelWidth(this.computedWidth))}},watch:{computedWidth:function(t,e){this.updateAll&&(this.elForm.registerLabelWidth(t,e),this.elFormItem.updateComputedLabelWidth(t))}},data:function(){return{computedWidth:0}},mounted:function(){this.updateLabelWidth("update")},updated:function(){this.updateLabelWidth("update")},beforeDestroy:function(){this.updateLabelWidth("remove")}},y=_,w=a("2877"),x=Object(w["a"])(y,b,v,!1,null,null,null),k=x.exports,S={name:"ElFormItem",componentName:"ElFormItem",mixins:[p],provide:function(){return{elFormItem:this}},inject:["elForm"],props:{label:String,labelWidth:String,prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],error:String,validateStatus:String,for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:String},components:{LabelWrap:k},watch:{error:{immediate:!0,handler:function(t){this.validateMessage=t,this.validateState=t?"error":""}},validateStatus:function(t){this.validateState=t}},computed:{labelFor:function(){return this.for||this.prop},labelStyle:function(){var t={};if("top"===this.form.labelPosition)return t;var e=this.labelWidth||this.form.labelWidth;return e&&(t.width=e),t},contentStyle:function(){var t={},e=this.label;if("top"===this.form.labelPosition||this.form.inline)return t;if(!e&&!this.labelWidth&&this.isNested)return t;var a=this.labelWidth||this.form.labelWidth;return"auto"===a?"auto"===this.labelWidth?t.marginLeft=this.computedLabelWidth:"auto"===this.form.labelWidth&&(t.marginLeft=this.elForm.autoLabelWidth):t.marginLeft=a,t},form:function(){var t=this.$parent,e=t.$options.componentName;while("ElForm"!==e)"ElFormItem"===e&&(this.isNested=!0),t=t.$parent,e=t.$options.componentName;return t},fieldValue:function(){var t=this.form.model;if(t&&this.prop){var e=this.prop;return-1!==e.indexOf(":")&&(e=e.replace(/:/,".")),g(t,e,!0).v}},isRequired:function(){var t=this.getRules(),e=!1;return t&&t.length&&t.every((function(t){return!t.required||(e=!0,!1)})),e},_formSize:function(){return this.elForm.size},elFormItemSize:function(){return this.size||this._formSize},sizeClass:function(){return this.elFormItemSize||(this.$ELEMENT||{}).size}},data:function(){return{validateState:"",validateMessage:"",validateDisabled:!1,validator:{},isNested:!1,computedLabelWidth:""}},methods:{validate:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;this.validateDisabled=!1;var i=this.getFilteredRule(t);if((!i||0===i.length)&&void 0===this.required)return a(),!0;this.validateState="validating";var r={};i&&i.length>0&&i.forEach((function(t){delete t.trigger})),r[this.prop]=i;var n=new d["default"](r),o={};o[this.prop]=this.fieldValue,n.validate(o,{firstFields:!0},(function(t,i){e.validateState=t?"error":"success",e.validateMessage=t?t[0].message:"",a(e.validateMessage,i),e.elForm&&e.elForm.$emit("validate",e.prop,!t,e.validateMessage||null)}))},clearValidate:function(){this.validateState="",this.validateMessage="",this.validateDisabled=!1},resetField:function(){var t=this;this.validateState="",this.validateMessage="";var e=this.form.model,a=this.fieldValue,i=this.prop;-1!==i.indexOf(":")&&(i=i.replace(/:/,"."));var r=g(e,i,!0);this.validateDisabled=!0,Array.isArray(a)?r.o[r.k]=[].concat(this.initialValue):r.o[r.k]=this.initialValue,this.$nextTick((function(){t.validateDisabled=!1})),this.broadcast("ElTimeSelect","fieldReset",this.initialValue)},getRules:function(){var t=this.form.rules,e=this.rules,a=void 0!==this.required?{required:!!this.required}:[],i=g(t,this.prop||"");return t=t?i.o[this.prop||""]||i.v:[],[].concat(e||t||[]).concat(a)},getFilteredRule:function(t){var e=this.getRules();return e.filter((function(e){return!e.trigger||""===t||(Array.isArray(e.trigger)?e.trigger.indexOf(t)>-1:e.trigger===t)})).map((function(t){return m({},t)}))},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){this.validateDisabled?this.validateDisabled=!1:this.validate("change")},updateComputedLabelWidth:function(t){this.computedLabelWidth=t?"".concat(t,"px"):""},addValidateEvents:function(){var t=this.getRules();(t.length||void 0!==this.required)&&(this.$on("el.form.blur",this.onFieldBlur),this.$on("el.form.change",this.onFieldChange))},removeValidateEvents:function(){this.$off()}},mounted:function(){if(this.prop){this.dispatch("ElForm","el.form.addField",[this]);var t=this.fieldValue;Array.isArray(t)&&(t=[].concat(t)),Object.defineProperty(this,"initialValue",{value:t}),this.addValidateEvents()}},beforeDestroy:function(){this.dispatch("ElForm","el.form.removeField",[this])}},E=S,O=Object(w["a"])(E,c,u,!1,null,null,null),$=O.exports,L={components:{ElFormItem:$},mixins:[l["a"]],data:function(){return{user_logo:o.a}},methods:{logout:function(){var t=this;Object(s["a"])(this,"auth.user").default.logout().then((function(e){t.$store.commit("LOGIN_STATUS",!1)}))}}},C=L,j=Object(w["a"])(C,i,r,!1,null,null,null);e["default"]=j.exports},e474:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticStyle:{"max-height":"300px"},attrs:{bodyStyle:"padding:10px",shadow:"never"}},t._l(t.templates,(function(e){return a("el-card",{staticStyle:{width:"250px",display:"inline-block","margin-right":"20px"},attrs:{"body-style":"background: #EBEEF5;",shadow:"hover"}},[a("div",{on:{click:function(a){return t.selectTemplate(e)}}},[a("div",[t._v(t._s(e.name))]),a("div",{staticStyle:{"font-size":"12px","margin-top":"5px"}},[t._v("描述："+t._s(e.description))]),e.user?a("div",{staticStyle:{"font-size":"12px"}},[t._v("\n                    操作人："+t._s(e.user.username)+"\n                ")]):t._e(),a("div",{staticStyle:{"font-size":"12px"}},[t._v("更新时间："+t._s(e.updatetime))])])])})),1),a("el-card",{staticStyle:{height:"680px","margin-top":"20px"},attrs:{shadow:"never"}},[a("el-row",{staticStyle:{"margin-bottom":"20px"}},[a("el-col",{attrs:{span:3}},[a("h3",[t._v("模板: "+t._s(t.template.name))])]),t.template.user?a("el-col",{attrs:{span:3}},[a("h3",[t._v("操作人："+t._s(t.template.user.username))])]):t._e(),a("el-col",{attrs:{span:17}},[a("h3",[t._v("描述："+t._s(t.template.description))])]),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{type:"primary"},on:{click:t.execute}},[t._v("执行")])],1)],1),a("el-tabs",{staticStyle:{height:"590px"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticStyle:{height:"550px"},attrs:{label:"执行配置",name:"params"}},[a("el-row",{staticStyle:{width:"100%",height:"100%"},attrs:{gutter:30}},[a("el-col",{staticStyle:{height:"100%","overflow-y":"auto"},attrs:{span:12}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.items,"highlight-current-row":!0},on:{"row-click":t.editParams}},[a("el-table-column",{attrs:{prop:"name",label:"name",width:"180"}}),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"updatetime",label:"更新时间"}}),a("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:t.newParams}},[t._v("新建")])]}},{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.remove(e.$index,e.row.id)}}},[t._v("删除\n                                    ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.execute(e.$index,e.row.id)}}},[t._v("\n                                        执行\n                                    ")])]}}])})],1)],1),a("el-col",{staticStyle:{height:"100%","overflow-y":"auto"},attrs:{span:12}},[a("el-row",{staticStyle:{width:"90%"}},[a("el-col",{attrs:{span:23}},[a("div",{staticClass:"demo-input-suffix"},[t._v("\n                                    配置名：\n                                    "),a("el-input",{staticStyle:{width:"60%"},attrs:{disabled:!t.paramsEdit,placeholder:"请输入内容"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)]),a("el-col",{attrs:{span:1}},[t.paramsEdit?a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.paramsEdit=!1}}},[t._v("\n                                    取消编辑\n                                ")]):a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.paramsEdit=!0}}},[t._v("编辑\n                                ")])],1)],1),a("el-timeline",{staticStyle:{"margin-top":"20px"}},t._l(t.form.actions,(function(e){return a("el-timeline-item",{attrs:{timestamp:"",placement:"top"}},[a("h4",[t._v(t._s(e.name))]),a("parameter_operate",{attrs:{disabled:!t.paramsEdit,mode:"params_show"},model:{value:e.params,callback:function(a){t.$set(e,"params",a)},expression:"action.params"}})],1)})),1),t.is_update?a("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("保存\n                        ")]):a("el-button",{attrs:{type:"primary"},on:{click:t.create}},[t._v("保存")])],1)],1)],1),a("el-tab-pane",{attrs:{label:"执行记录",name:"tasklist"}},[a("task_record",{attrs:{templateId:t.template.id}})],1)],1)],1),a("delete-modal",{ref:"deletemodal",attrs:{name:"项目",role:t.role}})],1)},r=[],n=a("8e44"),o=a("ed08"),l=(a("d722"),a("0712")),s={components:{parameter_operate:Object(o["b"])("task/params"),task_record:Object(o["b"])("task/record")},mixins:[l["a"]],data:function(){return{role:"task.params",templates:[],template:{},paramsList:[],activeName:"params",paramsEdit:!1,items:[]}},created:function(){this.getTemplates()},methods:{getTemplates:function(){var t=this;Object(n["a"])(this,"task.template").default.get({page_size:-1}).then((function(e){t.templates=e.data.data,t.selectTemplate(t.templates[0])}))},selectTemplate:function(t){this.template=t,this.filter.template_id=this.template.id,this.select(),this.newParams()},newParams:function(){this.form.actions=this.template.actions,this.form.template_id=this.template.id,this.form.name="",this.paramsEdit=!0,this.is_update=!1},editParams:function(t,e,a){this.form={},this.form=t,this.is_update=!0,this.paramsEdit=!1},execute:function(t,e){var a=this;Object(n["a"])(this,"task.task").default.post({params_id:e}).then((function(t){200===t.status?o["a"].OK(a,"执行成功"):o["a"].ERROR(a,t.data.message)}))}}},c=s,u=a("2877"),d=Object(u["a"])(c,i,r,!1,null,null,null);e["default"]=d.exports},ee1f:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",[a("h4",[t._v("\n            模板列表\n        ")])]),a("el-main",[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("新建模板")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.items,"row-key":"name"}},[a("el-table-column",{attrs:{prop:"name",label:"模板名"}}),a("el-table-column",{attrs:{prop:"description",label:"模板描述"}}),a("el-table-column",{attrs:{label:"创建者"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.user?a("span",[t._v(t._s(e.row.user.username))]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"updatetime",label:"更新时间"}}),a("el-table-column",{staticStyle:{float:"right"},attrs:{label:"操作",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.edit(e.$index,e.row)}}},[t._v("\n                        编辑\n                    ")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.remove(e.$index,e.row.id)}}},[t._v("\n                        删除\n                    ")])]}}])})],1),a("el-dialog",{attrs:{title:t.is_update?"编辑模板":"创建模板",visible:t.create_dialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.create_dialog=e}}},[a("el-form",{attrs:{model:t.form,"label-position":"right","label-width":"100px"}},[a("el-form-item",{attrs:{label:"模板名"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"模板描述"}},[a("el-input",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),a("el-form-item",{attrs:{label:"模板动作"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择动作"},on:{change:t.choiceAction}},t._l(t.actions_all,(function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",[a("div",{staticStyle:{display:"inline-block",width:"100%",height:"400px",border:"1px solid #DCDFE6","overflow-y":"auto"}},[a("div",{staticStyle:{padding:"10px"}},t._l(t.actions,(function(e){return a("el-card",{key:e.value,staticStyle:{margin:"5px 0"},attrs:{shadow:"hover","body-style":"padding:5px 15px"}},[a("div",[a("span",{staticStyle:{cursor:"pointer",color:"#409EFF","font-size":"18px"}},[t._v("\n                                            "+t._s(e.name)+"-"+t._s(e.action_code)+"\n                                        ")]),a("i",{staticClass:"el-icon-circle-close",staticStyle:{color:"#F56C6C",float:"right","font-size":"18px"},on:{click:function(a){return t.deleteAction(e)}}})]),a("div",[a("span",[t._v("\n                                            "+t._s(e.description)+"\n                                        ")])])])})),1)])])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.create_dialog=!1}}},[t._v("\n                    取 消\n                ")]),t.is_update?a("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("\n                    确 定\n                ")]):a("el-button",{attrs:{type:"primary"},on:{click:t.create}},[t._v("\n                    确 定\n                ")])],1)],1),a("delete-modal",{ref:"deletemodal",attrs:{name:"项目",role:t.role}})],1),a("el-footer",[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("paginate",{attrs:{pageinfo:t.pageinfo},on:{"page-change":t.pageChange,"size-change":t.sizeChange}})],1)],1)],1)},r=[],n=(a("ac6a"),a("8e44")),o=a("ed08"),l=(a("d722"),a("0712")),s={components:{parameter_operate:Object(o["b"])("task/params")},mixins:[l["a"]],data:function(){return{role:"task.template",actions:[],actions_all:[],current_action_params:[]}},created:function(){this.getActions()},methods:{getActions:function(){var t=this;Object(n["a"])(this,"task.action").default.get({page_size:-1}).then((function(e){t.actions_all=e.data.data}))},choiceAction:function(t){this.select_action="";var e={};this.actions_all.forEach((function(a){t==a.id&&(e=JSON.parse(JSON.stringify(a)))})),this.actions.push(e)},deleteAction:function(t){this.actions.splice(this.actions.indexOf(t),1)},create:function(){return this.form.actions=this.actions,Object(n["a"])(this,this.role).create(this.form).then((function(t,e){t.form={},t.create_dialog=!1,t.select(),t.reload()}))},edit:function(t,e){this.form=JSON.parse(JSON.stringify(e)),this.actions=this.form.actions,this.is_update=!0,this.create_dialog=!0}}},c=s,u=a("2877"),d=Object(u["a"])(c,i,r,!1,null,null,null);e["default"]=d.exports},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},fffc:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",[a("h4",[t._v("\n            动作列表\n        ")])]),a("el-main",[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("新建动作")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.items,"row-key":"name"}},[a("el-table-column",{attrs:{prop:"name",label:"动作名"}}),a("el-table-column",{attrs:{prop:"action_code",label:"动作脚本"}}),a("el-table-column",{attrs:{prop:"description",label:"描述"}}),a("el-table-column",{attrs:{label:"创建者"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.user?a("span",[t._v(t._s(e.row.user.username))]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"updatetime",label:"更新时间"}}),a("el-table-column",{staticStyle:{float:"right"},attrs:{label:"操作",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.edit(e.$index,e.row)}}},[t._v("\n                        编辑\n                    ")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.remove(e.$index,e.row.id)}}},[t._v("\n                        删除\n                    ")])]}}])})],1),a("el-dialog",{attrs:{title:t.is_update?"编辑动作":"创建动作",visible:t.create_dialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.create_dialog=e}}},[a("el-form",{attrs:{model:t.form,"label-position":"right","label-width":"100px"}},[a("el-form-item",{attrs:{label:"动作名"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),a("el-form-item",{attrs:{label:"动作脚本"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.action_code,callback:function(e){t.$set(t.form,"action_code",e)},expression:"form.action_code"}},t._l(t.actionCodes,(function(t){return a("el-option",{key:t.action_code,attrs:{label:t.action_code,value:t.action_code}})})),1)],1),a("el-form-item",{attrs:{label:"动作参数"}},[t.is_update?a("parameter_operate",{attrs:{mode:"params_show"},model:{value:t.form.params,callback:function(e){t.$set(t.form,"params",e)},expression:"form.params"}}):a("parameter_operate",{attrs:{mode:"params_show"},model:{value:t.current_action_params,callback:function(e){t.current_action_params=e},expression:"current_action_params"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.create_dialog=!1}}},[t._v("\n                    取 消\n                ")]),t.is_update?a("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("\n                    确 定\n                ")]):a("el-button",{attrs:{type:"primary"},on:{click:t.create}},[t._v("\n                    确 定\n                ")])],1)],1),a("delete-modal",{ref:"deletemodal",attrs:{name:"项目",role:t.role}})],1),a("el-footer",[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("paginate",{attrs:{pageinfo:t.pageinfo},on:{"page-change":t.pageChange,"size-change":t.sizeChange}})],1)],1)],1)},r=[],n=(a("ac6a"),a("8e44")),o=a("ed08"),l=(a("d722"),a("0712")),s={components:{parameter_operate:Object(o["b"])("task/params")},mixins:[l["a"]],data:function(){return{role:"task.action",actionCodes:[],current_action_params:[]}},watch:{"form.action_code":function(t){var e=this;t?this.actionCodes.forEach((function(a){a.action_code==t&&(e.current_action_params=a.params)})):this.current_action_params=[]}},created:function(){this.getActionCodes()},methods:{getActionCodes:function(){var t=this;Object(n["a"])(this,"task.action_code").default.get({page_size:-1}).then((function(e){t.actionCodes=e.data.data}))},create:function(){return this.form.params=this.current_action_params,Object(n["a"])(this,this.role).create(this.form).then((function(t,e){t.form={},t.create_dialog=!1,t.select(),t.reload()}))}}},c=s,u=a("2877"),d=Object(u["a"])(c,i,r,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-4e86e6be.2d412490.js.map